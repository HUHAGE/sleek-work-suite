# Umami 数据分析集成总结

## 完成的工作

### 1. 基础集成

✅ 在 `index.html` 中添加了 Umami 跟踪代码
```html
<script defer src="https://cloud.umami.is/script.js" data-website-id="f2467e0d-6846-4551-989d-4a4c5f1ad061"></script>
```

### 2. 创建分析工具库

✅ 创建了 `src/lib/analytics.ts` 文件，提供统一的埋点函数：
- `trackEvent()` - 通用事件跟踪
- `trackToolUsage()` - 工具使用跟踪
- `trackButtonClick()` - 按钮点击跟踪
- `trackMenuSwitch()` - 菜单切换跟踪

### 3. 为所有工具添加埋点

#### ✅ 数据库加解密工具 (DbDecryptTool)
- 加密/解密操作的开始、成功、失败事件
- 复制结果按钮
- 插入示例按钮
- 模式切换按钮

#### ✅ JAR 文件管理工具 (JarTools)
- 扫描操作的开始、成功、失败事件
- 选择路径按钮
- 打开路径按钮
- 单个文件复制
- 批量文件复制

#### ✅ URL 解密工具 (UrlDecryptTool)
- 解密操作的开始、成功、失败事件
- 复制结果按钮

#### ✅ 文本工具 (TextTools)
- 所有文本转换操作（大小写、编码解码、格式化等）
- 复制结果按钮
- 插入示例按钮

#### ✅ HUHA 工具集 (HuhaTools)
- 加载开始事件
- 加载完成事件

#### ✅ 设置工具 (SettingsTools)
- 侧边栏显示/隐藏切换
- 主题切换（浅色/深色/系统）
- 主题色切换

#### ✅ 菜单管理 (MenuManagement)
- 菜单项启用/禁用
- 菜单项排序（上移/下移）

#### ✅ 主页面 (Index)
- 工具切换事件

## 数据分析价值

通过这些埋点，你可以：

1. **了解工具受欢迎程度**
   - 哪些工具最常被使用
   - 哪些工具很少被使用

2. **分析功能使用情况**
   - 每个工具内哪些功能最受欢迎
   - 用户最常用的操作流程

3. **监控功能稳定性**
   - 各功能的成功率
   - 失败率较高的功能需要优化

4. **优化用户体验**
   - 根据使用数据调整菜单顺序
   - 突出显示高频功能
   - 简化或移除低频功能

## 如何查看数据

1. 登录 Umami 控制台：https://cloud.umami.is
2. 选择你的网站（website-id: f2467e0d-6846-4551-989d-4a4c5f1ad061）
3. 查看以下数据：
   - **Events** - 查看所有自定义事件
   - **menu_switch** - 工具切换统计
   - **button_click** - 按钮点击统计
   - **tool_*_*** - 各工具的使用统计

## 事件命名规范

- 工具使用事件：`tool_{工具名}_{操作}`
- 按钮点击事件：`button_click` (附带 tool 和 button 参数)
- 菜单切换事件：`menu_switch` (附带 menu 参数)
- 菜单管理事件：`menu_toggle`, `menu_reorder`

## 后续建议

1. **定期查看数据**
   - 建议每周查看一次使用数据
   - 关注趋势变化

2. **根据数据优化**
   - 优化高频功能的性能和体验
   - 考虑移除或改进低频功能
   - 提高失败率高的功能的稳定性

3. **A/B 测试**
   - 可以通过埋点数据进行功能改进的 A/B 测试
   - 对比不同版本的使用效果

4. **用户反馈结合**
   - 将数据分析结果与用户反馈结合
   - 更全面地了解用户需求

## 技术细节

- 所有埋点都是异步的，不会影响应用性能
- 埋点失败会被捕获，不会影响应用正常运行
- 使用 TypeScript 类型定义，确保类型安全
- 遵循 Umami 的最佳实践

## 文档

详细的埋点列表请查看：`docs/analytics-tracking.md`
