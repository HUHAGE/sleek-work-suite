# JDBC解密工具优化

## 优化概述

对JDBC解密工具进行了重大优化，提升了用户体验和功能灵活性。

## 主要改进

### 1. 灵活的输入格式支持

**之前：** 必须同时输入url、username、password三个完整字段
**现在：** 支持任意组合输入，可以只输入其中一行或多行

```
# 支持的输入格式示例：
url=jdbc:sqlserver://localhost;databaseName=test
# 或者
username=sa
password=123456
# 或者任意组合
```

### 2. 明文密文混合处理

**之前：** 加密模式只能处理明文，解密模式只能处理密文
**现在：** 智能识别每行内容，自动跳过已经是目标格式的内容

```
# 混合格式示例（解密模式）：
url={SM4_1::}加密的URL
username=明文用户名
password={SM4_1::}加密的密码
```

### 3. 智能处理逻辑

- **解密模式：** 自动识别密文格式`{SM4_1::}xxxxxx`，跳过明文内容
- **加密模式：** 自动识别明文内容，跳过已加密的密文
- **错误处理：** 单个字段处理失败不影响其他字段

### 4. 用户界面优化

- 更新了输入提示文本，说明支持混合格式
- 调整了示例内容，展示明文密文混合的场景
- 统一了按钮文本为"智能加密"/"智能解密"
- 优化了处理结果的显示

## 技术实现

### 前端优化

1. **解析逻辑重构：** 逐行解析输入内容，支持灵活的格式匹配
2. **状态管理：** 跟踪是否包含需要处理的内容，提供准确的用户反馈
3. **错误处理：** 单个字段失败时继续处理其他字段

### 后端扩展

1. **新增API：** 添加`decrypt-single-value`和`encrypt-single-value`接口
2. **性能优化：** 支持单个值的独立处理，避免不必要的批量操作
3. **类型安全：** 为新接口添加了类型定义

## 使用场景

### 场景1：部分配置需要更新
```
# 只需要加密新的密码
password=newPassword123
```

### 场景2：混合配置处理
```
# URL已加密，但用户名密码是明文
url={SM4_1::}已加密的URL
username=newUser
password=newPassword
```

### 场景3：验证解密结果
```
# 解密后再次处理，工具会智能跳过明文
url=jdbc:sqlserver://localhost;databaseName=test
username=sa
password=123456
```

## 向后兼容性

- 完全兼容原有的输入格式
- 原有的批量处理功能保持不变
- 示例和文档已更新，但不影响现有用户的使用习惯

## 性能提升

- 减少不必要的加解密操作
- 支持按需处理，提高响应速度
- 优化了错误处理，减少重试次数

## 用户体验改进

- 更灵活的输入方式，减少用户的格式约束
- 智能处理逻辑，减少用户的认知负担
- 更准确的反馈信息，帮助用户理解处理结果